<html>

<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cookies</title>
	
    <style>
	
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin-top: 50px;
        }
		
    </style>
	
</head>

<body>

    <h1>Cookie Example</h1>

    <div id="inputSection">
	
        <p>Enter a username:</p>
        <input type="text" id="nameInput">
        <button onclick="saveUsername()">Save</button>
		
    </div>

    <p id="cookieDisplay"></p>

    <button id="reEnterButton" onclick="enableInput()" style="display: none;">Re-enter Username</button>

    <footer>
        <p>Â© Viswa Puligedda 11/20/2024</p>
    </footer>

    <script>
		
		function setCookie(cname, cvalue, exdays) {
		    const d = new Date();
		    d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
		    let expires = "expires=" + d.toUTCString();
		    document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
		}

		function getCookie(cname) {
		    let name = cname + "=";
		    let ca = document.cookie.split(';');
		    for (let i = 0; i < ca.length; i++) {
		        let c = ca[i];
		        while (c.charAt(0) == ' ') {
		            c = c.substring(1);
		        }
		        if (c.indexOf(name) == 0) {
		            return c.substring(name.length, c.length);
		        }
		    }
		    return "";
		}

		function displayCookie() {
		    let user = getCookie("username");
		    if (user != "") {
		        document.getElementById("cookieDisplay").innerText = "Welcome back, " + user + "!";
		        document.getElementById("inputSection").style.display = "none";
		        document.getElementById("reEnterButton").style.display = "block";
		    } else {
		        document.getElementById("cookieDisplay").innerText = "";
		        document.getElementById("inputSection").style.display = "block";
		        document.getElementById("reEnterButton").style.display = "none";
		    }
		}

		function saveUsername() {
		    let user = document.getElementById("nameInput").value;
		    if (user != "") {
		        setCookie("username", user, 365);
		        alert("Cookie saved! Refresh the page to see the greeting.");
		    } else {
		        alert("Please enter a username!");
		    }
		    displayCookie();
		}

		function enableInput() {
		    document.getElementById("inputSection").style.display = "block";
		    document.getElementById("reEnterButton").style.display = "none";
		    document.getElementById("nameInput").value = ""; // Clear input field
		    document.getElementById("cookieDisplay").innerText = ""; // Clear displayed message
		}

		displayCookie();

    </script>
</body>
</html>
